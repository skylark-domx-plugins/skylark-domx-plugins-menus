{"version":3,"sources":["menu.js"],"names":["define","langx","$","lists","plugins","menus","Menu","Plugin","inherit","klassName","pluginName","options","template","classes","base","selectors","container","item","templates","general","separator","hasChildren","active","children","selector","submenu","descendant","data","onAction","_construct","elm","prototype","call","this","_$container","listenTo","e","itemData","currentTarget","renderMenuItemHtml","_renderItemHtml","itemTpl","isString","isFunction","renderGeneralMenuItem","_renderGeneralItemHtml","renderHasChildrenMenuItem","_renderHasChildrenItemHtml","register"],"mappings":";;;;;;;AAAAA,QACE,sBACA,qBACA,qBACA,4BACA,WACA,SAASC,EAAMC,EAAEC,EAAMC,EAAQC,GAC/B,aAGA,IAAIC,EAAOF,EAAQG,OAAOC,SACxBC,UAAY,OAEZC,WAAa,kBAEbC,SACEC,SAAW,GAEXC,SACEC,KAAO,aAGTC,WACEC,UAAY,MAGdC,MACEC,WACEC,QAAU,uEACVC,UAAY,GACZC,YAAc,wGAGhBR,SACEC,KAAO,YACPQ,OAAS,GACTD,YAAc,gBAIlBE,UACEX,SAAW,YACXC,SACEC,KAAO,WAETU,SAAW,cAGbC,SACEb,SAAW,YACXG,WACEQ,SAAW,OACXG,WAAa,OAIjBC,QAIAC,SAAW,MAGbC,WAAa,SAASC,EAAInB,GACtBP,EAAQG,OAAOwB,UAAUF,WAAWG,KAAKC,KAAKH,EAAInB,GAElDsB,KAAKC,YAAcD,KAAK/B,EAAE+B,KAAKtB,QAAQI,UAAUC,WAE7CiB,KAAKtB,QAAQiB,UACfK,KAAKE,SAASF,KAAKC,YAAY,YAAYD,KAAKtB,QAAQM,KAAKJ,QAAQC,OAAQsB,IACzE,IAAIC,EAAWnC,EAAEkC,EAAEE,eAAeX,KAAK,QACvCM,KAAKtB,QAAQiB,SAASS,MAOhCE,mBAAqB,SAASF,GAC5B,IAAKJ,KAAKO,gBAAiB,CACzB,IAAIC,EAAUR,KAAKtB,QAAQM,KAAKL,SAC5BX,EAAMyC,SAASD,GACjBR,KAAKO,gBAAkBvC,EAAMW,SAAS6B,GAC7BxC,EAAM0C,WAAWF,KAC1BR,KAAKO,gBAAkBC,GAI3B,OAAOR,KAAKO,gBAAgBH,IAG9BO,sBAAwB,SAASP,GAC/B,IAAKJ,KAAKY,uBAAwB,CAChC,IAAIJ,EAAUR,KAAKtB,QAAQM,KAAKC,UAAUC,QACtClB,EAAMyC,SAASD,GACjBR,KAAKY,uBAAyB5C,EAAMW,SAAS6B,GACpCxC,EAAM0C,WAAWF,KAC1BR,KAAKY,uBAAyBJ,GAGlC,OAAOvC,EAAE+B,KAAKY,uBAAuBR,KAGvCS,0BAA4B,SAAST,GACnC,IAAKJ,KAAKc,2BAA4B,CACpC,IAAIN,EAAUR,KAAKtB,QAAQM,KAAKC,UAAUG,YACtCpB,EAAMyC,SAASD,GACjBR,KAAKc,2BAA6B9C,EAAMW,SAAS6B,GACxCxC,EAAM0C,WAAWF,KAC1BR,KAAKc,2BAA6BN,GAItC,OAAOvC,EAAE+B,KAAKc,2BAA2BV,OAS7C,OAFAjC,EAAQ4C,SAAS1C,GAEVD,EAAMC,KAAOA","file":"../menu.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\"\r\n],function(langx,$,lists,plugins,menus){\r\n  'use strict'\r\n\r\n\r\n  var Menu = plugins.Plugin.inherit({\r\n    klassName : \"Menu\",\r\n\r\n    pluginName : \"lark.menus.menu\",\r\n\r\n    options : {\r\n      template : \"\",\r\n\r\n      classes : {\r\n        base : \"lark-menu\"\r\n      },\r\n\r\n      selectors : {\r\n        container : null\r\n      },\r\n\r\n      item : {\r\n        templates : {\r\n          general : '<li class=\"menu-item\"><a href=\"#\" class=\"link\"><%= title %></a></li>',\r\n          separator : \"\",\r\n          hasChildren : '<li class=\"menu-item hasChildren\"><a href=\"#\" class=\"link\"><%= title %></a><ul class=\"submenu\"></ul>',\r\n        },\r\n\r\n        classes : {\r\n          base : \"menu-item\",\r\n          active : \"\",\r\n          hasChildren : \"hasChildren\"\r\n        }\r\n      },\r\n\r\n      children : {\r\n        template : \"<ul></ul>\",\r\n        classes : {\r\n          base : \"submenu\"\r\n        },\r\n        selector : \"> .submenu\"\r\n      },\r\n\r\n      submenu : {\r\n        template : \"<ul></ul>\",\r\n        selectors : {\r\n          children : \"> ul\",\r\n          descendant : \"ul\"\r\n        }\r\n      },\r\n\r\n      data : {\r\n        ///items : []\r\n      },\r\n\r\n      onAction : null\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        plugins.Plugin.prototype._construct.call(this,elm,options);\r\n\r\n        this._$container = this.$(this.options.selectors.container);\r\n\r\n        if (this.options.onAction) {\r\n          this.listenTo(this._$container,\"click\",`.${this.options.item.classes.base}`,(e)=>{\r\n              var itemData = $(e.currentTarget).data(\"item\");\r\n              this.options.onAction(itemData);\r\n\r\n          });\r\n        }\r\n\r\n    },\r\n\r\n    renderMenuItemHtml : function(itemData) {\r\n      if (!this._renderItemHtml) {\r\n        let itemTpl = this.options.item.template;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return this._renderItemHtml(itemData);\r\n    },\r\n\r\n    renderGeneralMenuItem : function(itemData) {\r\n      if (!this._renderGeneralItemHtml) {\r\n        let itemTpl = this.options.item.templates.general;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderGeneralItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderGeneralItemHtml = itemTpl;\r\n        }\r\n      }\r\n      return $(this._renderGeneralItemHtml(itemData));\r\n    },\r\n\r\n    renderHasChildrenMenuItem : function(itemData) {\r\n      if (!this._renderHasChildrenItemHtml) {\r\n        let itemTpl = this.options.item.templates.hasChildren;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return $(this._renderHasChildrenItemHtml(itemData));\r\n    }   \r\n\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Menu);\r\n\r\n  return menus.Menu = Menu; \r\n});"]}