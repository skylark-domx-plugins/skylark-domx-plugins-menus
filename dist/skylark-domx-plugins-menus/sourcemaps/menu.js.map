{"version":3,"sources":["menu.js"],"names":["define","langx","$","lists","plugins","menus","Menu","Plugin","inherit","klassName","pluginName","options","template","classes","base","selectors","container","item","templates","general","separator","hasChildren","active","submenu","children","descendant","data","onAction","_construct","elm","prototype","call","this","_$container","listenTo","itemData","e","currentTarget","renderMenuItemHtml","itemTpl","_renderItemHtml","isString","isFunction","renderGeneralMenuItem","_renderGeneralItemHtml","renderHasChildrenMenuItem","_renderHasChildrenItemHtml","register"],"mappings":";;;;;;;AAAAA,OAAO,CACL,sBACA,qBACA,qBACA,4BACA,WACA,SAASC,EAAMC,EAAEC,EAAMC,EAAQC,GAC/B,aAGA,IAAIC,EAAOF,EAAQG,OAAOC,QAAQ,CAChCC,UAAY,OAEZC,WAAa,kBAEbC,QAAU,CACRC,SAAW,GAEXC,QAAU,CACRC,KAAO,WACT,EAEAC,UAAY,CACVC,UAAY,IACd,EAEAC,KAAO,CACLC,UAAY,CACVC,QAAU,uEACVC,UAAY,GACZC,YAAc,sGAChB,EAEAR,QAAU,CACRC,KAAO,YACPQ,OAAS,SACTD,YAAc,aAChB,EAEAN,UAAY,CACVI,QAAU,KACVE,YAAc,UAChB,CACF,EAEAE,QAAU,CACRX,SAAW,YACXC,QAAU,CACRC,KAAO,SACT,EACAC,UAAY,CACVS,SAAW,OACXC,WAAa,IACf,CACF,EAEAC,KAAO,GAIPC,SAAW,IACb,EAEAC,WAAa,SAASC,EAAIlB,GACtBP,EAAQG,OAAOuB,UAAUF,WAAWG,KAAKC,KAAKH,EAAIlB,CAAO,EAEzDqB,KAAKC,YAAcD,KAAK9B,EAAE8B,KAAKrB,QAAQI,UAAUC,SAAS,EAEtDgB,KAAKrB,QAAQgB,UACfK,KAAKE,SAASF,KAAKC,YAAY,QAAQ,IAAID,KAAKrB,QAAQM,KAAKJ,QAAQC,KAAO,IACpEqB,EAAWjC,EAAEkC,EAAEC,aAAa,EAAEX,KAAK,MAAM,EAC7CM,KAAKrB,QAAQgB,SAASQ,CAAQ,CAElC,CAAC,CAGP,EAEAG,mBAAqB,SAASH,GAC5B,IACMI,EAQN,OATKP,KAAKQ,kBACJD,EAAUP,KAAKrB,QAAQM,KAAKL,SAC5BX,EAAMwC,SAASF,CAAO,EACxBP,KAAKQ,gBAAkBvC,EAAMW,SAAS2B,CAAO,EACpCtC,EAAMyC,WAAWH,CAAO,IACjCP,KAAKQ,gBAAkBD,IAIpBP,KAAKQ,gBAAgBL,CAAQ,CACtC,EAEAQ,sBAAwB,SAASR,GAC/B,IACMI,EAON,OARKP,KAAKY,yBACJL,EAAUP,KAAKrB,QAAQM,KAAKC,UAAUC,QACtClB,EAAMwC,SAASF,CAAO,EACxBP,KAAKY,uBAAyB3C,EAAMW,SAAS2B,CAAO,EAC3CtC,EAAMyC,WAAWH,CAAO,IACjCP,KAAKY,uBAAyBL,IAG3BrC,EAAE8B,KAAKY,uBAAuBT,CAAQ,CAAC,CAChD,EAEAU,0BAA4B,SAASV,GACnC,IACMI,EAQN,OATKP,KAAKc,6BACJP,EAAUP,KAAKrB,QAAQM,KAAKC,UAAUG,YACtCpB,EAAMwC,SAASF,CAAO,EACxBP,KAAKc,2BAA6B7C,EAAMW,SAAS2B,CAAO,EAC/CtC,EAAMyC,WAAWH,CAAO,IACjCP,KAAKc,2BAA6BP,IAI/BrC,EAAE8B,KAAKc,2BAA2BX,CAAQ,CAAC,CACpD,CAGF,CAAC,EAKD,OAFA/B,EAAQ2C,SAASzC,CAAI,EAEdD,EAAMC,KAAOA,CACtB,CAAC","file":"../menu.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\"\r\n],function(langx,$,lists,plugins,menus){\r\n  'use strict'\r\n\r\n\r\n  var Menu = plugins.Plugin.inherit({\r\n    klassName : \"Menu\",\r\n\r\n    pluginName : \"lark.menus.menu\",\r\n\r\n    options : {\r\n      template : \"\",\r\n\r\n      classes : {\r\n        base : \"lark-menu\"\r\n      },\r\n\r\n      selectors : {\r\n        container : null\r\n      },\r\n\r\n      item : {\r\n        templates : {\r\n          general : '<li class=\"menu-item\"><a href=\"#\" class=\"link\"><%= title %></a></li>',\r\n          separator : \"\",\r\n          hasChildren : '<li class=\"menu-item hasChildren\"><a href=\"#\" class=\"link\"><%= title %></a><ul class=\"submenu\"></ul>',\r\n        },\r\n\r\n        classes : {\r\n          base : \"menu-item\",\r\n          active : \"active\",\r\n          hasChildren : \"hasChildren\"\r\n        },\r\n\r\n        selectors : {\r\n          general : \"li\",\r\n          hasChildren : \":has(ul)\"\r\n        }\r\n      },\r\n\r\n      submenu : {\r\n        template : \"<ul></ul>\",\r\n        classes : {\r\n          base : \"submenu\"\r\n        },\r\n        selectors : {\r\n          children : \"> ul\",\r\n          descendant : \"ul\"\r\n        }\r\n      },\r\n\r\n      data : {\r\n        ///items : []\r\n      },\r\n\r\n      onAction : null\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        plugins.Plugin.prototype._construct.call(this,elm,options);\r\n\r\n        this._$container = this.$(this.options.selectors.container);\r\n\r\n        if (this.options.onAction) {\r\n          this.listenTo(this._$container,\"click\",`.${this.options.item.classes.base}`,(e)=>{\r\n              var itemData = $(e.currentTarget).data(\"item\");\r\n              this.options.onAction(itemData);\r\n\r\n          });\r\n        }\r\n\r\n    },\r\n\r\n    renderMenuItemHtml : function(itemData) {\r\n      if (!this._renderItemHtml) {\r\n        let itemTpl = this.options.item.template;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return this._renderItemHtml(itemData);\r\n    },\r\n\r\n    renderGeneralMenuItem : function(itemData) {\r\n      if (!this._renderGeneralItemHtml) {\r\n        let itemTpl = this.options.item.templates.general;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderGeneralItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderGeneralItemHtml = itemTpl;\r\n        }\r\n      }\r\n      return $(this._renderGeneralItemHtml(itemData));\r\n    },\r\n\r\n    renderHasChildrenMenuItem : function(itemData) {\r\n      if (!this._renderHasChildrenItemHtml) {\r\n        let itemTpl = this.options.item.templates.hasChildren;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return $(this._renderHasChildrenItemHtml(itemData));\r\n    }   \r\n\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Menu);\r\n\r\n  return menus.Menu = Menu; \r\n});"]}