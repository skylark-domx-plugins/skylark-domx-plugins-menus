{"version":3,"sources":["mega-menu.js"],"names":["define","langx","$","lists","plugins","menus","Menu","MegaMenu","inherit","klassName","pluginName","options","menuBehaviour","stickyHeader","selector","this","caret","caretArrows","up","down","upUrl","downUrl","highlighter","followingHighlighter","highlightColor","textHighlighter","textHighlighterColor","animation","animationClass","_construct","elm","prototype","call","settings","mainLinks","subMenu","mainLinksDataAttribute","iDofSubMenus","caretUp","attr","defaults","caretDown","removeClass","addClass","append","css","background-image","appendTo","on","border-color","each","i","linkID","push","findPositionOfSubmenus","jQuery","inArray","imageCaret","find","hasClass","left","offset","mouseover","e","pageX","innerWidth","display","width","background-color","mouseleave","remove","click","hide","show","prepend","window","resize","margin-top","outerHeight","document","ready","trigger","length","register"],"mappings":"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","file":"../mega-menu.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var MegaMenu = Menu.inherit({\r\n    klassName : \"MegaMenu\",\r\n\r\n    pluginName : \"lark.menus.mega\",\r\n\r\n    options : {\r\n      menuBehaviour: \"click\",\r\n      stickyHeader: true,\r\n      selector: $(this),\r\n      caret:false,\r\n      caretArrows: [{\r\n        up: \"caret-up\",\r\n        down: \"caret-down\",\r\n        upUrl:\"\",\r\n        downUrl:\"\",\r\n      }],\r\n      highlighter: true,\r\n      followingHighlighter: false,\r\n      highlightColor:\"\",\r\n      textHighlighter: false,\r\n      textHighlighterColor: \"\",\r\n      animation:false,\r\n      animationClass: \"\",\r\n\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        let settings = this.options;\r\n        \r\n        var element = settings.selector;\r\n        var mainLinks = $(\".main-links ul li a\");\r\n        var subMenu = $(\".menu-dropdown .menu-item-wrapper\");\r\n        var mainLinksDataAttribute = [];\r\n        var iDofSubMenus = [];\r\n        var selectElementwithId = $(\"#\"+subMenu.attr(\"id\"));\r\n\r\n        var caretUp = defaults.caretArrows[0].up;\r\n        var caretDown = defaults.caretArrows[0].down;\r\n\r\n        // Sticky Heder\r\n\r\n        if (settings.stickyHeader === false) {\r\n          $(\".mega-menu\").removeClass(\"sticky-header\");\r\n        }\r\n        else {\r\n          $(\".mega-menu\").addClass(\"sticky-header\");\r\n        }\r\n\r\n        // If caret: custom then it will exclude default settings mentioned above\r\n        if (settings.caret === true) {\r\n          var caretUp = settings.caretArrows[0].up;\r\n          var caretDown = settings.caretArrows[0].down;\r\n        }\r\n\r\n        // If icon caret (up or down) is not empty image caret should be hidden\r\n        if (settings.caretArrows[0].up || settings.caretArrows[0].down ) {\r\n          settings.caretArrows[0].upUrl = null;\r\n          settings.caretArrows[0].downUrl = null;\r\n        }\r\n\r\n        // Creating Caret icon for every link which have data-submenu attribute\r\n        $(\"a[data-submenu]\").append('<span class=\"caret ' + caretDown + '\"></span>');\r\n\r\n        // Set Initial Image path for carret (Default is down)\r\n        if (settings.caret === true && settings.caretArrows[0].downUrl !== \"\") {\r\n          $(\".mega-menu span.caret\").removeClass(\"undefined\");\r\n          $(\".mega-menu span.caret\").addClass(\"caret-img down\");\r\n          $(\".mega-menu span.caret.caret-img.down\").css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n        }\r\n\r\n        // Append Style on DOM\r\n        $(`<style>\r\n            .mega-menu .main-links ul li a:hover{\r\n              border-color:` +settings.highlightColor+\r\n            `}\r\n          </style>`).appendTo(\"head\");\r\n\r\n        // Remove Active link Highlight\r\n        mainLinks.on(settings.menuBehaviour, function(){\r\n          mainLinks.removeClass(\"highlight\");\r\n          mainLinks.css({\"border-color\":\"\"});\r\n        });\r\n\r\n        // If a user didn't defined menu behaviour\r\n        if (settings.menuBehaviour === \"\") {\r\n          settings.menuBehaviour = \"click\";\r\n        }\r\n\r\n        // Menu Toggle Works\r\n        mainLinks.each(function(i){\r\n\r\n          var linkID = $(this).attr(\"data-submenu\");\r\n\r\n          mainLinksDataAttribute.push($(this).attr(\"data-submenu\"));\r\n\r\n          $(this).on(settings.menuBehaviour,function(){\r\n            // Find Position of Menu ULs to help pass index for perticular ID on each menu links\r\n            var findPositionOfSubmenus = jQuery.inArray( linkID, iDofSubMenus );\r\n\r\n            var imageCaret = $(this).find(\".caret.caret-img\");\r\n\r\n            // Sets every links default behavour for caret except currently clicked\r\n            mainLinks.find(\"span\").removeClass(caretUp);\r\n            mainLinks.find(\"span\").addClass(caretDown);\r\n\r\n            // $(\".caret.caret-img\").css(\"background-image\").replace(/\\\"/g, \"\") == \"url(\" +settings.caretArrows[0].downUrl+ \")\"\r\n\r\n            // Icon Caret toggling\r\n            if (mainLinksDataAttribute[i] == iDofSubMenus[findPositionOfSubmenus] && !$(subMenu[findPositionOfSubmenus]).hasClass(\"active\")) {\r\n\r\n              subMenu.removeClass(\"active\");\r\n              $(subMenu[findPositionOfSubmenus]).addClass(\"active\");\r\n\r\n              $(this).find(\"span\").removeClass(caretDown);\r\n              $(this).find(\"span\").addClass(caretUp);\r\n            }\r\n            else {\r\n                $(subMenu[findPositionOfSubmenus]).removeClass(\"active\");\r\n\r\n                $(this).find(\"span\").removeClass(caretUp);\r\n                $(this).find(\"span\").addClass(caretDown);\r\n            }\r\n\r\n            // Sets every links default behavour for image caret except currently clicked\r\n            if ($(\".menu-dropdown\").find(\".menu-item-wrapper\").hasClass(\"active\")) {\r\n              $(\".mega-menu span.caret\").addClass(\"down\");\r\n              $(\".mega-menu span.caret\").css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n            }\r\n\r\n            // Image caret toggling\r\n            if (imageCaret.hasClass(\"down\")) {\r\n              imageCaret.removeClass(\"down\");\r\n              imageCaret.addClass(\"up\");\r\n              imageCaret.css({\"background-image\" : \"url(\" +settings.caretArrows[0].upUrl+ \")\"});\r\n              // console.log(imageCaret[0].className);\r\n            }\r\n            else {\r\n              imageCaret.removeClass(\"up\");\r\n              imageCaret.addClass(\"down\");\r\n              imageCaret.css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n              // console.log(imageCaret[0].className);\r\n            }\r\n\r\n            // Active link Highlight\r\n            if (mainLinks.find(\"span\").hasClass(\"caret-up\") || $(this).find(\"span\").hasClass(\"up\") && !$(this).hasClass(\"highlight\") ) {\r\n              $(this).addClass(\"highlight\");\r\n\r\n              // Changing Highlight Color\r\n              $(this).css({\"border-color\": settings.highlightColor});\r\n            }\r\n\r\n            // Normal Dropdown Positioning\r\n            if (subMenu.hasClass(\"dropdown\") ) {\r\n              var dropDownforClickedLink = $(\"#\"+iDofSubMenus[findPositionOfSubmenus]+\".dropdown\");\r\n              dropDownforClickedLink.css({\"left\": $(this).offset().left })\r\n            }\r\n\r\n          });\r\n\r\n        });\r\n\r\n\r\n        // If Follow highlighter set true\r\n        if (settings.followingHighlighter === true) {\r\n\r\n          // Add a element with class first\r\n          $(\".main-links ul\").append('<div class=\"follow-highlighter\"></div>');\r\n\r\n          // While Mouser Hover\r\n          mainLinks.mouseover(function(e,i){\r\n\r\n            var getCurrentElementMousePos = e.pageX - $(this).offset().left;\r\n            var currentElementHalfWidth = $(this).innerWidth() / 2;\r\n\r\n            $(\".follow-highlighter\").css({\"display\": \"block\"});\r\n            $(\".main-links ul\").addClass(\"follow-highlighter-enabled\")\r\n            $(\".follow-highlighter\").css({\"width\" : $(this).innerWidth() , \"left\" : $(this).offset().left , \"background-color\": settings.highlightColor});\r\n\r\n          });\r\n        }\r\n\r\n        // While Mouse Unhover\r\n        $(\".main-links ul\").each(function(){\r\n          $(this).mouseleave(function(){\r\n            $(\".main-links ul\").removeClass(\"follow-highlighter-enabled\");\r\n            $(\".follow-highlighter\").css({\"display\": \"none\", \"left\" : $(mainLinks[0]).offset().left});\r\n          })\r\n        })\r\n\r\n        // If no need of highighter\r\n        if (settings.highlighter === false) {\r\n          $(\".main-links\").addClass(\"disable-highlighter\");\r\n          $(\".follow-highlighter\").remove();\r\n        }\r\n\r\n        // If Text Highlighter Set to true\r\n        if (settings.textHighlighter === true) {\r\n          $(\".main-links\").addClass(\"text-highlighter\");\r\n        }\r\n        // Text Highlighter Color\r\n        if (settings.textHighlighterColor) {\r\n          $(\"style\").append(`.mega-menu .text-highlighter.main-links ul li a:hover{\r\n            color:` + settings.textHighlighterColor +\r\n          `}`);\r\n        }\r\n\r\n          // Get menus IDs\r\n          subMenu.each(function(i){\r\n            iDofSubMenus.push($(subMenu[i]).attr(\"id\"));\r\n          });\r\n\r\n          // Add Animations\r\n          if (settings.animation === true) {\r\n            subMenu.addClass(settings.animationClass);\r\n          }\r\n\r\n          // Mobile Nav icon\r\n          $(\".mobile-nav-icon a\").click(function(){\r\n            $(\".follow-highlighter\").remove();\r\n            if ($(\".main-links\").hasClass(\"active\")) {\r\n              $(\".main-links\").removeClass(\"active\");\r\n              $(\".menu-dropdown\").hide();\r\n            }\r\n            else {\r\n              $(\".main-links\").addClass(\"active\");\r\n              $(\".menu-dropdown\").show();\r\n            }\r\n          });\r\n\r\n\r\n          // Responsive options\r\n\r\n          $(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>');\r\n\r\n          $(window).resize(function() {\r\n           if ($(window).width() < 768) {\r\n\r\n             // Get main-links marging top as height of mobile-nav-icon\r\n             if ($(\".mega-menu\").hasClass(\"sticky-header\")) {\r\n               $(\".mega-menu\").addClass(\"responsive-menu\");\r\n               $(\".main-links\").css({\"margin-top\": $(\".mobile-nav-icon\").outerHeight()+\"px\"});\r\n\r\n               // $(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>');\r\n\r\n             }\r\n\r\n           } else {\r\n             $(\".main-links\").css({\"margin-top\": \"0px\"});\r\n             // $(\".back-link\").remove();\r\n            // $(\".mega-menu\").removeClass(\"responsive-menu\");\r\n           }\r\n          });\r\n\r\n          $(document).ready(\r\n            function(){\r\n              $(\".back-link\").on('click', function(){\r\n                mainLinks.trigger('click');\r\n                $(mainLinks[mainLinks.length - 1]).trigger('click');\r\n              });\r\n            }\r\n          )\r\n\r\n\r\n\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(MegaMenu);\r\n\r\n  return menus.MegaMenu = MegaMenu;\t\r\n});"]}