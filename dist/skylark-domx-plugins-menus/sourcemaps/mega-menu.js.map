{"version":3,"sources":["mega-menu.js"],"names":["define","langx","$","lists","plugins","menus","Menu","MegaMenu","inherit","klassName","pluginName","options","menuBehaviour","stickyHeader","caret","caretArrows","up","down","upUrl","downUrl","highlighter","followingHighlighter","highlightColor","textHighlighter","textHighlighterColor","animation","animationClass","_construct","elm","prototype","call","this","let","settings","selector","mainLinks","subMenu","mainLinksDataAttribute","iDofSubMenus","caretUp","attr","caretDown","removeClass","addClass","append","css","background-image","appendTo","on","border-color","each","i","linkID","push","findPositionOfSubmenus","inArray","imageCaret","find","hasClass","left","offset","mouseover","e","pageX","innerWidth","display","width","background-color","mouseleave","remove","click","hide","show","prepend","window","resize","margin-top","outerHeight","register"],"mappings":";;;;;;;AAAAA,OAAO,CACL,sBACA,qBACA,qBACA,4BACA,UACA,UACA,SAASC,EAAMC,EAAEC,EAAMC,EAAQC,EAAMC,GACrC,aAEA,IAAIC,EAAWD,EAAKE,QAAQ,CAC1BC,UAAY,WAEZC,WAAa,kBAEbC,QAAU,CACRC,cAAe,QACfC,aAAc,CAAA,EAEdC,MAAM,CAAA,EACNC,YAAa,CAAC,CACZC,GAAI,WACJC,KAAM,aACNC,MAAM,GACNC,QAAQ,EACV,GACAC,YAAa,CAAA,EACbC,qBAAsB,CAAA,EACtBC,eAAe,GACfC,gBAAiB,CAAA,EACjBC,qBAAsB,GACtBC,UAAU,CAAA,EACVC,eAAgB,EAElB,EAEAC,WAAa,SAASC,EAAIjB,GACtBL,EAAKuB,UAAUF,WAAWG,KAAKC,KAAKH,EAAIjB,CAAO,EAE/CqB,IAAIC,EAAWF,KAAKpB,QAENsB,EAASC,SAAvB,IACIC,EAAYjC,EAAE,qBAAqB,EACnCkC,EAAUlC,EAAE,mCAAmC,EAC/CmC,EAAyB,GACzBC,EAAe,GAGfC,GAFsBrC,EAAE,IAAIkC,EAAQI,KAAK,IAAI,CAAC,EAEpCT,KAAKpB,QAAQI,YAAY,GAAGC,IACtCyB,EAAYV,KAAKpB,QAAQI,YAAY,GAAGE,KAId,CAAA,IAA1BgB,EAASpB,aACXX,EAAE,YAAY,EAAEwC,YAAY,eAAe,EAG3CxC,EAAE,YAAY,EAAEyC,SAAS,eAAe,EAInB,CAAA,IAAnBV,EAASnB,QACPyB,EAAUN,EAASlB,YAAY,GAAGC,GAClCyB,EAAYR,EAASlB,YAAY,GAAGE,OAItCgB,EAASlB,YAAY,GAAGC,IAAMiB,EAASlB,YAAY,GAAGE,QACxDgB,EAASlB,YAAY,GAAGG,MAAQ,KAChCe,EAASlB,YAAY,GAAGI,QAAU,MAIpCjB,EAAE,iBAAiB,EAAE0C,OAAO,sBAAwBH,EAAY,WAAW,EAGpD,CAAA,IAAnBR,EAASnB,OAAsD,KAApCmB,EAASlB,YAAY,GAAGI,UACrDjB,EAAE,uBAAuB,EAAEwC,YAAY,WAAW,EAClDxC,EAAE,uBAAuB,EAAEyC,SAAS,gBAAgB,EACpDzC,EAAE,sCAAsC,EAAE2C,IAAI,CAACC,mBAAqB,OAAQb,EAASlB,YAAY,GAAGI,QAAS,GAAG,CAAC,GAInHjB;;6BAEsB+B,EAASX;mBAEpB,EAAEyB,SAAS,MAAM,EAG5BZ,EAAUa,GAAGf,EAASrB,cAAe,WACnCuB,EAAUO,YAAY,WAAW,EACjCP,EAAUU,IAAI,CAACI,eAAe,EAAE,CAAC,CACnC,CAAC,EAG8B,KAA3BhB,EAASrB,gBACXqB,EAASrB,cAAgB,SAI3BuB,EAAUe,KAAK,SAASC,GAEtB,IAAIC,EAASlD,EAAE6B,IAAI,EAAES,KAAK,cAAc,EAExCH,EAAuBgB,KAAKnD,EAAE6B,IAAI,EAAES,KAAK,cAAc,CAAC,EAExDtC,EAAE6B,IAAI,EAAEiB,GAAGf,EAASrB,cAAc,WAEhC,IAAI0C,EAAyBrD,EAAMsD,QAASH,EAAQd,CAAa,EAE7DkB,EAAatD,EAAE6B,IAAI,EAAE0B,KAAK,kBAAkB,EAGhDtB,EAAUsB,KAAK,MAAM,EAAEf,YAAYH,CAAO,EAC1CJ,EAAUsB,KAAK,MAAM,EAAEd,SAASF,CAAS,EAKrCJ,EAAuBc,IAAMb,EAAagB,IAA4BpD,EAAEkC,EAAQkB,EAAuB,EAAEI,SAAS,QAAQ,GAS1HxD,EAAEkC,EAAQkB,EAAuB,EAAEZ,YAAY,QAAQ,EAEvDxC,EAAE6B,IAAI,EAAE0B,KAAK,MAAM,EAAEf,YAAYH,CAAO,EACxCrC,EAAE6B,IAAI,EAAE0B,KAAK,MAAM,EAAEd,SAASF,CAAS,IAVzCL,EAAQM,YAAY,QAAQ,EAC5BxC,EAAEkC,EAAQkB,EAAuB,EAAEX,SAAS,QAAQ,EAEpDzC,EAAE6B,IAAI,EAAE0B,KAAK,MAAM,EAAEf,YAAYD,CAAS,EAC1CvC,EAAE6B,IAAI,EAAE0B,KAAK,MAAM,EAAEd,SAASJ,CAAO,GAUnCrC,EAAE,gBAAgB,EAAEuD,KAAK,oBAAoB,EAAEC,SAAS,QAAQ,IAClExD,EAAE,uBAAuB,EAAEyC,SAAS,MAAM,EAC1CzC,EAAE,uBAAuB,EAAE2C,IAAI,CAACC,mBAAqB,OAAQb,EAASlB,YAAY,GAAGI,QAAS,GAAG,CAAC,GAIhGqC,EAAWE,SAAS,MAAM,GAC5BF,EAAWd,YAAY,MAAM,EAC7Bc,EAAWb,SAAS,IAAI,EACxBa,EAAWX,IAAI,CAACC,mBAAqB,OAAQb,EAASlB,YAAY,GAAGG,MAAO,GAAG,CAAC,IAIhFsC,EAAWd,YAAY,IAAI,EAC3Bc,EAAWb,SAAS,MAAM,EAC1Ba,EAAWX,IAAI,CAACC,mBAAqB,OAAQb,EAASlB,YAAY,GAAGI,QAAS,GAAG,CAAC,IAKhFgB,EAAUsB,KAAK,MAAM,EAAEC,SAAS,UAAU,GAAKxD,EAAE6B,IAAI,EAAE0B,KAAK,MAAM,EAAEC,SAAS,IAAI,GAAK,CAACxD,EAAE6B,IAAI,EAAE2B,SAAS,WAAW,KACrHxD,EAAE6B,IAAI,EAAEY,SAAS,WAAW,EAG5BzC,EAAE6B,IAAI,EAAEc,IAAI,CAACI,eAAgBhB,EAASX,cAAc,CAAC,GAInDc,EAAQsB,SAAS,UAAU,GACAxD,EAAE,IAAIoC,EAAagB,GAAwB,WAAW,EAC5DT,IAAI,CAACc,KAAQzD,EAAE6B,IAAI,EAAE6B,OAAO,EAAED,IAAK,CAAC,CAG/D,CAAC,CAEH,CAAC,EAIqC,CAAA,IAAlC1B,EAASZ,uBAGXnB,EAAE,gBAAgB,EAAE0C,OAAO,wCAAwC,EAGnET,EAAU0B,UAAU,SAASC,EAAEX,GAEGW,EAAEC,MAAQ7D,EAAE6B,IAAI,EAAE6B,OAAO,EAAED,KAC7BzD,EAAE6B,IAAI,EAAEiC,WAAW,EAEjD9D,EAAE,qBAAqB,EAAE2C,IAAI,CAACoB,QAAW,OAAO,CAAC,EACjD/D,EAAE,gBAAgB,EAAEyC,SAAS,4BAA4B,EACzDzC,EAAE,qBAAqB,EAAE2C,IAAI,CAACqB,MAAUhE,EAAE6B,IAAI,EAAEiC,WAAW,EAAIL,KAASzD,EAAE6B,IAAI,EAAE6B,OAAO,EAAED,KAAOQ,mBAAoBlC,EAASX,cAAc,CAAC,CAE9I,CAAC,GAIHpB,EAAE,gBAAgB,EAAEgD,KAAK,WACvBhD,EAAE6B,IAAI,EAAEqC,WAAW,WACjBlE,EAAE,gBAAgB,EAAEwC,YAAY,4BAA4B,EAC5DxC,EAAE,qBAAqB,EAAE2C,IAAI,CAACoB,QAAW,OAAQN,KAASzD,EAAEiC,EAAU,EAAE,EAAEyB,OAAO,EAAED,IAAI,CAAC,CAC1F,CAAC,CACH,CAAC,EAG4B,CAAA,IAAzB1B,EAASb,cACXlB,EAAE,aAAa,EAAEyC,SAAS,qBAAqB,EAC/CzC,EAAE,qBAAqB,EAAEmE,OAAO,GAID,CAAA,IAA7BpC,EAASV,iBACXrB,EAAE,aAAa,EAAEyC,SAAS,kBAAkB,EAG1CV,EAAST,sBACXtB,EAAE,OAAO,EAAE0C;oBACCX,EAAST,qBACrB,GAAG,EAIHY,EAAQc,KAAK,SAASC,GACpBb,EAAae,KAAKnD,EAAEkC,EAAQe,EAAE,EAAEX,KAAK,IAAI,CAAC,CAC5C,CAAC,EAG0B,CAAA,IAAvBP,EAASR,WACXW,EAAQO,SAASV,EAASP,cAAc,EAI1CxB,EAAE,oBAAoB,EAAEoE,MAAM,WAC5BpE,EAAE,qBAAqB,EAAEmE,OAAO,EAC5BnE,EAAE,aAAa,EAAEwD,SAAS,QAAQ,GACpCxD,EAAE,aAAa,EAAEwC,YAAY,QAAQ,EACrCxC,EAAE,gBAAgB,EAAEqE,KAAK,IAGzBrE,EAAE,aAAa,EAAEyC,SAAS,QAAQ,EAClCzC,EAAE,gBAAgB,EAAEsE,KAAK,EAE7B,CAAC,EAKDtE,EAAE,oBAAoB,EAAEuE,QAAQ,wCAAwC,EAExEvE,EAAEwE,MAAM,EAAEC,OAAO,WACZzE,EAAEwE,MAAM,EAAER,MAAM,EAAI,IAGlBhE,EAAE,YAAY,EAAEwD,SAAS,eAAe,IAC1CxD,EAAE,YAAY,EAAEyC,SAAS,iBAAiB,EAC1CzC,EAAE,aAAa,EAAE2C,IAAI,CAAC+B,aAAc1E,EAAE,kBAAkB,EAAE2E,YAAY,EAAE,IAAI,CAAC,GAO/E3E,EAAE,aAAa,EAAE2C,IAAI,CAAC+B,aAAc,KAAK,CAAC,CAI7C,CAAC,CAUP,CAEF,CAAC,EAKD,OAFAxE,EAAQ0E,SAASvE,CAAQ,EAElBF,EAAME,SAAWA,CAC1B,CAAC","file":"../mega-menu.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var MegaMenu = Menu.inherit({\r\n    klassName : \"MegaMenu\",\r\n\r\n    pluginName : \"lark.menus.mega\",\r\n\r\n    options : {\r\n      menuBehaviour: \"click\",\r\n      stickyHeader: true,\r\n      //selector: $(this),\r\n      caret:false,\r\n      caretArrows: [{\r\n        up: \"caret-up\",\r\n        down: \"caret-down\",\r\n        upUrl:\"\",\r\n        downUrl:\"\",\r\n      }],\r\n      highlighter: true,\r\n      followingHighlighter: false,\r\n      highlightColor:\"\",\r\n      textHighlighter: false,\r\n      textHighlighterColor: \"\",\r\n      animation:false,\r\n      animationClass: \"\",\r\n\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        let settings = this.options;\r\n        \r\n        var element = settings.selector;\r\n        var mainLinks = $(\".main-links ul li a\");\r\n        var subMenu = $(\".menu-dropdown .menu-item-wrapper\");\r\n        var mainLinksDataAttribute = [];\r\n        var iDofSubMenus = [];\r\n        var selectElementwithId = $(\"#\"+subMenu.attr(\"id\"));\r\n\r\n        var caretUp = this.options.caretArrows[0].up;\r\n        var caretDown = this.options.caretArrows[0].down;\r\n\r\n        // Sticky Heder\r\n\r\n        if (settings.stickyHeader === false) {\r\n          $(\".mega-menu\").removeClass(\"sticky-header\");\r\n        }\r\n        else {\r\n          $(\".mega-menu\").addClass(\"sticky-header\");\r\n        }\r\n\r\n        // If caret: custom then it will exclude default settings mentioned above\r\n        if (settings.caret === true) {\r\n          var caretUp = settings.caretArrows[0].up;\r\n          var caretDown = settings.caretArrows[0].down;\r\n        }\r\n\r\n        // If icon caret (up or down) is not empty image caret should be hidden\r\n        if (settings.caretArrows[0].up || settings.caretArrows[0].down ) {\r\n          settings.caretArrows[0].upUrl = null;\r\n          settings.caretArrows[0].downUrl = null;\r\n        }\r\n\r\n        // Creating Caret icon for every link which have data-submenu attribute\r\n        $(\"a[data-submenu]\").append('<span class=\"caret ' + caretDown + '\"></span>');\r\n\r\n        // Set Initial Image path for carret (Default is down)\r\n        if (settings.caret === true && settings.caretArrows[0].downUrl !== \"\") {\r\n          $(\".mega-menu span.caret\").removeClass(\"undefined\");\r\n          $(\".mega-menu span.caret\").addClass(\"caret-img down\");\r\n          $(\".mega-menu span.caret.caret-img.down\").css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n        }\r\n\r\n        // Append Style on DOM\r\n        $(`<style>\r\n            .mega-menu .main-links ul li a:hover{\r\n              border-color:` +settings.highlightColor+\r\n            `}\r\n          </style>`).appendTo(\"head\");\r\n\r\n        // Remove Active link Highlight\r\n        mainLinks.on(settings.menuBehaviour, function(){\r\n          mainLinks.removeClass(\"highlight\");\r\n          mainLinks.css({\"border-color\":\"\"});\r\n        });\r\n\r\n        // If a user didn't defined menu behaviour\r\n        if (settings.menuBehaviour === \"\") {\r\n          settings.menuBehaviour = \"click\";\r\n        }\r\n\r\n        // Menu Toggle Works\r\n        mainLinks.each(function(i){\r\n\r\n          var linkID = $(this).attr(\"data-submenu\");\r\n\r\n          mainLinksDataAttribute.push($(this).attr(\"data-submenu\"));\r\n\r\n          $(this).on(settings.menuBehaviour,function(){\r\n            // Find Position of Menu ULs to help pass index for perticular ID on each menu links\r\n            var findPositionOfSubmenus = langx.inArray( linkID, iDofSubMenus );\r\n\r\n            var imageCaret = $(this).find(\".caret.caret-img\");\r\n\r\n            // Sets every links default behavour for caret except currently clicked\r\n            mainLinks.find(\"span\").removeClass(caretUp);\r\n            mainLinks.find(\"span\").addClass(caretDown);\r\n\r\n            // $(\".caret.caret-img\").css(\"background-image\").replace(/\\\"/g, \"\") == \"url(\" +settings.caretArrows[0].downUrl+ \")\"\r\n\r\n            // Icon Caret toggling\r\n            if (mainLinksDataAttribute[i] == iDofSubMenus[findPositionOfSubmenus] && !$(subMenu[findPositionOfSubmenus]).hasClass(\"active\")) {\r\n\r\n              subMenu.removeClass(\"active\");\r\n              $(subMenu[findPositionOfSubmenus]).addClass(\"active\");\r\n\r\n              $(this).find(\"span\").removeClass(caretDown);\r\n              $(this).find(\"span\").addClass(caretUp);\r\n            }\r\n            else {\r\n                $(subMenu[findPositionOfSubmenus]).removeClass(\"active\");\r\n\r\n                $(this).find(\"span\").removeClass(caretUp);\r\n                $(this).find(\"span\").addClass(caretDown);\r\n            }\r\n\r\n            // Sets every links default behavour for image caret except currently clicked\r\n            if ($(\".menu-dropdown\").find(\".menu-item-wrapper\").hasClass(\"active\")) {\r\n              $(\".mega-menu span.caret\").addClass(\"down\");\r\n              $(\".mega-menu span.caret\").css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n            }\r\n\r\n            // Image caret toggling\r\n            if (imageCaret.hasClass(\"down\")) {\r\n              imageCaret.removeClass(\"down\");\r\n              imageCaret.addClass(\"up\");\r\n              imageCaret.css({\"background-image\" : \"url(\" +settings.caretArrows[0].upUrl+ \")\"});\r\n              // console.log(imageCaret[0].className);\r\n            }\r\n            else {\r\n              imageCaret.removeClass(\"up\");\r\n              imageCaret.addClass(\"down\");\r\n              imageCaret.css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n              // console.log(imageCaret[0].className);\r\n            }\r\n\r\n            // Active link Highlight\r\n            if (mainLinks.find(\"span\").hasClass(\"caret-up\") || $(this).find(\"span\").hasClass(\"up\") && !$(this).hasClass(\"highlight\") ) {\r\n              $(this).addClass(\"highlight\");\r\n\r\n              // Changing Highlight Color\r\n              $(this).css({\"border-color\": settings.highlightColor});\r\n            }\r\n\r\n            // Normal Dropdown Positioning\r\n            if (subMenu.hasClass(\"dropdown\") ) {\r\n              var dropDownforClickedLink = $(\"#\"+iDofSubMenus[findPositionOfSubmenus]+\".dropdown\");\r\n              dropDownforClickedLink.css({\"left\": $(this).offset().left })\r\n            }\r\n\r\n          });\r\n\r\n        });\r\n\r\n\r\n        // If Follow highlighter set true\r\n        if (settings.followingHighlighter === true) {\r\n\r\n          // Add a element with class first\r\n          $(\".main-links ul\").append('<div class=\"follow-highlighter\"></div>');\r\n\r\n          // While Mouser Hover\r\n          mainLinks.mouseover(function(e,i){\r\n\r\n            var getCurrentElementMousePos = e.pageX - $(this).offset().left;\r\n            var currentElementHalfWidth = $(this).innerWidth() / 2;\r\n\r\n            $(\".follow-highlighter\").css({\"display\": \"block\"});\r\n            $(\".main-links ul\").addClass(\"follow-highlighter-enabled\")\r\n            $(\".follow-highlighter\").css({\"width\" : $(this).innerWidth() , \"left\" : $(this).offset().left , \"background-color\": settings.highlightColor});\r\n\r\n          });\r\n        }\r\n\r\n        // While Mouse Unhover\r\n        $(\".main-links ul\").each(function(){\r\n          $(this).mouseleave(function(){\r\n            $(\".main-links ul\").removeClass(\"follow-highlighter-enabled\");\r\n            $(\".follow-highlighter\").css({\"display\": \"none\", \"left\" : $(mainLinks[0]).offset().left});\r\n          })\r\n        })\r\n\r\n        // If no need of highighter\r\n        if (settings.highlighter === false) {\r\n          $(\".main-links\").addClass(\"disable-highlighter\");\r\n          $(\".follow-highlighter\").remove();\r\n        }\r\n\r\n        // If Text Highlighter Set to true\r\n        if (settings.textHighlighter === true) {\r\n          $(\".main-links\").addClass(\"text-highlighter\");\r\n        }\r\n        // Text Highlighter Color\r\n        if (settings.textHighlighterColor) {\r\n          $(\"style\").append(`.mega-menu .text-highlighter.main-links ul li a:hover{\r\n            color:` + settings.textHighlighterColor +\r\n          `}`);\r\n        }\r\n\r\n          // Get menus IDs\r\n          subMenu.each(function(i){\r\n            iDofSubMenus.push($(subMenu[i]).attr(\"id\"));\r\n          });\r\n\r\n          // Add Animations\r\n          if (settings.animation === true) {\r\n            subMenu.addClass(settings.animationClass);\r\n          }\r\n\r\n          // Mobile Nav icon\r\n          $(\".mobile-nav-icon a\").click(function(){\r\n            $(\".follow-highlighter\").remove();\r\n            if ($(\".main-links\").hasClass(\"active\")) {\r\n              $(\".main-links\").removeClass(\"active\");\r\n              $(\".menu-dropdown\").hide();\r\n            }\r\n            else {\r\n              $(\".main-links\").addClass(\"active\");\r\n              $(\".menu-dropdown\").show();\r\n            }\r\n          });\r\n\r\n\r\n          // Responsive options\r\n\r\n          $(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>');\r\n\r\n          $(window).resize(function() {\r\n           if ($(window).width() < 768) {\r\n\r\n             // Get main-links marging top as height of mobile-nav-icon\r\n             if ($(\".mega-menu\").hasClass(\"sticky-header\")) {\r\n               $(\".mega-menu\").addClass(\"responsive-menu\");\r\n               $(\".main-links\").css({\"margin-top\": $(\".mobile-nav-icon\").outerHeight()+\"px\"});\r\n\r\n               // $(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>');\r\n\r\n             }\r\n\r\n           } else {\r\n             $(\".main-links\").css({\"margin-top\": \"0px\"});\r\n             // $(\".back-link\").remove();\r\n            // $(\".mega-menu\").removeClass(\"responsive-menu\");\r\n           }\r\n          });\r\n\r\n          ///$(document).ready(\r\n          ///  function(){\r\n          ///    $(\".back-link\").on('click', function(){\r\n          ///      mainLinks.trigger('click');\r\n         ///       $(mainLinks[mainLinks.length - 1]).trigger('click');\r\n          ///    });\r\n          ///  }\r\n          ///)\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(MegaMenu);\r\n\r\n  return menus.MegaMenu = MegaMenu;\t\r\n});"]}