/**
 * skylark-domx-plugins-menus - The skylark menu plugin library.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx/skylark-domx-plugins-menus/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","./menus","./menu"],function(c,m,e,a,s,i){"use strict";var n=i.inherit({klassName:"MegaMenu",pluginName:"lark.menus.mega",options:{menuBehaviour:"click",stickyHeader:!0,caret:!1,caretArrows:[{up:"caret-up",down:"caret-down",upUrl:"",downUrl:""}],highlighter:!0,followingHighlighter:!1,highlightColor:"",textHighlighter:!1,textHighlighterColor:"",animation:!1,animationClass:""},_construct:function(e,a){i.prototype._construct.call(this,e,a);let n=this.options;n.selector;var r=m(".main-links ul li a"),l=m(".menu-dropdown .menu-item-wrapper"),t=[],o=[],h=(m("#"+l.attr("id")),this.options.caretArrows[0].up),d=this.options.caretArrows[0].down;!1===n.stickyHeader?m(".mega-menu").removeClass("sticky-header"):m(".mega-menu").addClass("sticky-header"),!0===n.caret&&(h=n.caretArrows[0].up,d=n.caretArrows[0].down),(n.caretArrows[0].up||n.caretArrows[0].down)&&(n.caretArrows[0].upUrl=null,n.caretArrows[0].downUrl=null),m("a[data-submenu]").append('<span class="caret '+d+'"></span>'),!0===n.caret&&""!==n.caretArrows[0].downUrl&&(m(".mega-menu span.caret").removeClass("undefined"),m(".mega-menu span.caret").addClass("caret-img down"),m(".mega-menu span.caret.caret-img.down").css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),m(`<style>
            .mega-menu .main-links ul li a:hover{
              border-color:`+n.highlightColor+`}
          </style>`).appendTo("head"),r.on(n.menuBehaviour,function(){r.removeClass("highlight"),r.css({"border-color":""})}),""===n.menuBehaviour&&(n.menuBehaviour="click"),r.each(function(s){var i=m(this).attr("data-submenu");t.push(m(this).attr("data-submenu")),m(this).on(n.menuBehaviour,function(){var e=c.inArray(i,o),a=m(this).find(".caret.caret-img");r.find("span").removeClass(h),r.find("span").addClass(d),t[s]!=o[e]||m(l[e]).hasClass("active")?(m(l[e]).removeClass("active"),m(this).find("span").removeClass(h),m(this).find("span").addClass(d)):(l.removeClass("active"),m(l[e]).addClass("active"),m(this).find("span").removeClass(d),m(this).find("span").addClass(h)),m(".menu-dropdown").find(".menu-item-wrapper").hasClass("active")&&(m(".mega-menu span.caret").addClass("down"),m(".mega-menu span.caret").css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),a.hasClass("down")?(a.removeClass("down"),a.addClass("up"),a.css({"background-image":"url("+n.caretArrows[0].upUrl+")"})):(a.removeClass("up"),a.addClass("down"),a.css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),(r.find("span").hasClass("caret-up")||m(this).find("span").hasClass("up")&&!m(this).hasClass("highlight"))&&(m(this).addClass("highlight"),m(this).css({"border-color":n.highlightColor})),l.hasClass("dropdown")&&m("#"+o[e]+".dropdown").css({left:m(this).offset().left})})}),!0===n.followingHighlighter&&(m(".main-links ul").append('<div class="follow-highlighter"></div>'),r.mouseover(function(e,a){e.pageX,m(this).offset().left,m(this).innerWidth();m(".follow-highlighter").css({display:"block"}),m(".main-links ul").addClass("follow-highlighter-enabled"),m(".follow-highlighter").css({width:m(this).innerWidth(),left:m(this).offset().left,"background-color":n.highlightColor})})),m(".main-links ul").each(function(){m(this).mouseleave(function(){m(".main-links ul").removeClass("follow-highlighter-enabled"),m(".follow-highlighter").css({display:"none",left:m(r[0]).offset().left})})}),!1===n.highlighter&&(m(".main-links").addClass("disable-highlighter"),m(".follow-highlighter").remove()),!0===n.textHighlighter&&m(".main-links").addClass("text-highlighter"),n.textHighlighterColor&&m("style").append(`.mega-menu .text-highlighter.main-links ul li a:hover{
            color:`+n.textHighlighterColor+"}"),l.each(function(e){o.push(m(l[e]).attr("id"))}),!0===n.animation&&l.addClass(n.animationClass),m(".mobile-nav-icon a").click(function(){m(".follow-highlighter").remove(),m(".main-links").hasClass("active")?(m(".main-links").removeClass("active"),m(".menu-dropdown").hide()):(m(".main-links").addClass("active"),m(".menu-dropdown").show())}),m(".menu-item-wrapper").prepend('<a href="#" class="back-link">Back</a>'),m(window).resize(function(){m(window).width()<768?m(".mega-menu").hasClass("sticky-header")&&(m(".mega-menu").addClass("responsive-menu"),m(".main-links").css({"margin-top":m(".mobile-nav-icon").outerHeight()+"px"})):m(".main-links").css({"margin-top":"0px"})})}});return a.register(n),s.MegaMenu=n});
//# sourceMappingURL=sourcemaps/mega-menu.js.map
