{"version":3,"sources":["skylark-domx-plugins-menus.js"],"names":["define","skylark","attach","langx","$","lists","plugins","menus","Menu","Plugin","inherit","klassName","pluginName","options","template","classes","base","selectors","container","item","templates","general","separator","hasChildren","active","children","selector","submenu","descendant","data","onAction","_construct","elm","prototype","call","this","_$container","listenTo","e","itemData","currentTarget","renderMenuItemHtml","_renderItemHtml","itemTpl","isString","isFunction","renderGeneralMenuItem","_renderGeneralItemHtml","renderHasChildrenMenuItem","_renderHasChildrenItemHtml","register","AccordionMenu","multitier","mixin","togglable","CascadeMenu","NavMenu","items","resetItems","itemsData","self","$itemsContainer","forEach","renderItem","$container","$item","append","$childrenContainer","find","childItemData","TreeMenu","hide","$el","plugin","toggle","keys","noder","styler","PopupMenu","delay","icons","position","my","at","role","disabled","blur","focus","select","element","activeMenu","mouseHandled","lastMousePosition","x","y","attr","tabIndex","mousedown .ui-menu-item","event","preventDefault","_activateItem","click .ui-menu-item","target","not","length","isPropagationStopped","has","expand","is","closest","trigger","parents","clearTimeout","timer","mouseenter .ui-menu-item","mousemove .ui-menu-item","mouseleave","mouseleave .ui-menu","keepActiveItem","_menuItems","first","_delay","notContained","includes","collapseAll","keydown","document","click","_closeOnDocumentClick","previousFilter","clientX","clientY","actualTarget","siblings","removeClass","_destroy","removeAttr","submenus","removeUniqueId","addBack","show","each","elem","remove","_keydown","match","prev","character","skip","keyCode","PAGE_UP","previousPage","PAGE_DOWN","nextPage","HOME","_move","END","UP","previous","DOWN","next","LEFT","collapse","RIGHT","ENTER","SPACE","_activate","ESC","toString","String","fromCharCode","filterTimer","_filterMenuItems","index","nextAll","refresh","newItems","newWrappers","that","icon","toggleClass","filter","aria-hidden","aria-expanded","menu","submenuCaret","addClass","prepend","add","_isDivider","_itemRole","listbox","nested","focused","type","_scrollIntoView","parent","_close","test","_startOpening","borderTop","paddingTop","offset","scroll","elementHeight","itemHeight","_hasScroll","parseFloat","css","top","scrollTop","height","outerHeight","fromFocus","_open","extend","of","all","currentMenu","startMenu","text","newItem","isFirstItem","prevAll","isLastItem","direction","last","prop","ui","escapedCharacter","replace","regex","RegExp","trim","main"],"mappings":"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","file":"../skylark-domx-plugins-menus.js","sourcesContent":["define('skylark-domx-plugins-menus/menus',[\r\n\t\"skylark-langx/skylark\"\r\n],function(skylark){\r\n\treturn skylark.attach(\"domx.plugins.menus\");\r\n});\ndefine('skylark-domx-plugins-menus/menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\"\r\n],function(langx,$,lists,plugins,menus){\r\n  'use strict'\r\n\r\n\r\n  var Menu = plugins.Plugin.inherit({\r\n    klassName : \"Menu\",\r\n\r\n    pluginName : \"lark.menus.menu\",\r\n\r\n    options : {\r\n      template : \"\",\r\n\r\n      classes : {\r\n        base : \"lark-menu\"\r\n      },\r\n\r\n      selectors : {\r\n        container : null\r\n      },\r\n\r\n      item : {\r\n        templates : {\r\n          general : '<li class=\"menu-item\"><a href=\"#\" class=\"link\"><%= title %></a></li>',\r\n          separator : \"\",\r\n          hasChildren : '<li class=\"menu-item hasChildren\"><a href=\"#\" class=\"link\"><%= title %></a><ul class=\"submenu\"></ul>',\r\n        },\r\n\r\n        classes : {\r\n          base : \"menu-item\",\r\n          active : \"\",\r\n          hasChildren : \"hasChildren\"\r\n        }\r\n      },\r\n\r\n      children : {\r\n        template : \"<ul></ul>\",\r\n        classes : {\r\n          base : \"submenu\"\r\n        },\r\n        selector : \"> .submenu\"\r\n      },\r\n\r\n      submenu : {\r\n        template : \"<ul></ul>\",\r\n        selectors : {\r\n          children : \"> ul\",\r\n          descendant : \"ul\"\r\n        }\r\n      },\r\n\r\n      data : {\r\n        ///items : []\r\n      },\r\n\r\n      onAction : null\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        plugins.Plugin.prototype._construct.call(this,elm,options);\r\n\r\n        this._$container = this.$(this.options.selectors.container);\r\n\r\n        if (this.options.onAction) {\r\n          this.listenTo(this._$container,\"click\",`.${this.options.item.classes.base}`,(e)=>{\r\n              var itemData = $(e.currentTarget).data(\"item\");\r\n              this.options.onAction(itemData);\r\n\r\n          });\r\n        }\r\n\r\n    },\r\n\r\n    renderMenuItemHtml : function(itemData) {\r\n      if (!this._renderItemHtml) {\r\n        let itemTpl = this.options.item.template;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return this._renderItemHtml(itemData);\r\n    },\r\n\r\n    renderGeneralMenuItem : function(itemData) {\r\n      if (!this._renderGeneralItemHtml) {\r\n        let itemTpl = this.options.item.templates.general;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderGeneralItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderGeneralItemHtml = itemTpl;\r\n        }\r\n      }\r\n      return $(this._renderGeneralItemHtml(itemData));\r\n    },\r\n\r\n    renderHasChildrenMenuItem : function(itemData) {\r\n      if (!this._renderHasChildrenItemHtml) {\r\n        let itemTpl = this.options.item.templates.hasChildren;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return $(this._renderHasChildrenItemHtml(itemData));\r\n    }   \r\n\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Menu);\r\n\r\n  return menus.Menu = Menu; \r\n});\ndefine('skylark-domx-plugins-menus/accordion-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n  \r\n   var AccordionMenu = Menu.inherit({\r\n    klassName : \"AccordionMenu\",\r\n\r\n    pluginName : \"lark.menus.accordion\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          togglable : true\r\n        },this.options));\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(AccordionMenu);\r\n\r\n  return menus.AccordionMenu = AccordionMenu; \r\n});\ndefine('skylark-domx-plugins-menus/cascade-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var CascadeMenu = Menu.inherit({\r\n    klassName : \"CascadeMenu\",\r\n\r\n    pluginName : \"lark.menus.cascade\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          togglable : true\r\n        },this.options));\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(CascadeMenu);\r\n\r\n  return menus.CascadeMenu = CascadeMenu;\t\r\n});\ndefine('skylark-domx-plugins-menus/nav-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var NavMenu = Menu.inherit({\r\n    klassName : \"NavMenu\",\r\n\r\n    pluginName : \"lark.menus.nav\",\r\n\r\n    options : {\r\n      item : {\r\n        templates : {\r\n        } \r\n      }\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        if (this.options.data.items) {\r\n          this.resetItems(this.options.data.items);\r\n        }\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          /*\r\n          show : function($el) {\r\n            $el;\r\n          },\r\n\r\n          hide : function($el) {\r\n            $el;\r\n\r\n          },\r\n\r\n          toggle : function($el) {\r\n            $el;\r\n\r\n          }\r\n          */\r\n        },this.options));\r\n    },\r\n\r\n    resetItems : function(itemsData) {\r\n      let self = this;\r\n\r\n      function renderItem(itemData,$container) {\r\n        let $item;\r\n        if (itemData.children) {\r\n          $item = self.renderHasChildrenMenuItem(itemData);\r\n        } else {\r\n          $item = self.renderGeneralMenuItem(itemData);\r\n        }\r\n\r\n        $item.data(\"item\",itemData);\r\n        $container.append($item)\r\n\r\n        if (itemData.children) {\r\n          let $childrenContainer = $item.find(self.options.children.selector);\r\n          itemData.children.forEach((childItemData) => {\r\n            renderItem(childItemData,$childrenContainer);            \r\n          });\r\n        }\r\n      }\r\n        \r\n      let $itemsContainer = this.$(this.options.selectors.container)\r\n\r\n      itemsData.forEach((itemData)=>{\r\n        renderItem(itemData,$itemsContainer);\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(NavMenu);\r\n\r\n  return menus.NavMenu = NavMenu;\t\r\n});\n define('skylark-domx-plugins-menus/tree-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\",\r\n  \"skylark-domx-plugins-toggles\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var TreeMenu = Menu.inherit({\r\n    klassName : \"Tree\",\r\n\r\n    pluginName : \"lark.menus.tree\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          hide : function($el) {\r\n            $el.plugin(\"lark.toggles.collapse\").hide();\r\n          },\r\n          toggle : function($el) {\r\n            $el.plugin(\"lark.toggles.collapse\").toggle();\r\n          }\r\n        },this.options));\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(TreeMenu);\r\n\r\n  return menus.TreeMenu = TreeMenu;\t\r\n});\ndefine('skylark-domx-plugins-menus/popup-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-devices-keyboard/keys\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-styler\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,keys,noder,styler, $,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  \tvar PopupMenu = Menu.inherit({\r\n\r\n    \tklassName : \"PopupMenu\",\r\n\r\n    \tpluginName : \"lark.menus.popup\",\r\n\r\n\t\tdelay: 300,\r\n\t\toptions: {\r\n\t\t\ticons: {\r\n\t\t\t\tsubmenu: \"ui-icon-caret-1-e\"\r\n\t\t\t},\r\n\t\t\t///items: \"> *\",\r\n\t\t\t///menus: \"ul\",\r\n\t\t\tposition: {\r\n\t\t\t\tmy: \"left top\",\r\n\t\t\t\tat: \"right top\"\r\n\t\t\t},\r\n\r\n\t\t\trole: \"menu\",\r\n\r\n\r\n\t\t\titem : {\r\n\t\t\t\tclasses : {\r\n\t\t\t\t\tbase : \"ui-menu-item\",\r\n          \t\t\tactive : \"ui-state-active\",\r\n          \t\t\tdisabled : \"ui-state-disabled\"\r\n\t\t\t\t},\r\n\t\t\t\tselector : \"> *\"\r\n\t\t\t},\r\n\r\n\t\t\t// Callbacks\r\n\t\t\tblur: null,\r\n\t\t\tfocus: null,\r\n\t\t\tselect: null\r\n\t\t},\r\n\r\n    \t_construct : function(elm,options) {\r\n        \tMenu.prototype._construct.call(this,elm,options);\r\n\t\t\tthis.element = this.$();\r\n\r\n\t\t\tthis.activeMenu = this.element;\r\n\r\n\t\t\t// Flag used to prevent firing of the click handler\r\n\t\t\t// as the event bubbles up through nested menus\r\n\t\t\tthis.mouseHandled = false;\r\n\t\t\tthis.lastMousePosition = { x: null, y: null };\r\n\t\t\tthis.element\r\n\t\t\t\t.attr( {\r\n\t\t\t\t\trole: this.options.role,\r\n\t\t\t\t\ttabIndex: 0\r\n\t\t\t\t} );\r\n\r\n\t\t\tthis.listenTo(this.element, {\r\n\r\n\t\t\t\t// Prevent focus from sticking to links inside menu after clicking\r\n\t\t\t\t// them (focus should always stay on UL during navigation).\r\n\t\t\t\t\"mousedown .ui-menu-item\": function( event ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tthis._activateItem( event );\r\n\t\t\t\t},\r\n\t\t\t\t\"click .ui-menu-item\": function( event ) {\r\n\t\t\t\t\tvar target = $( event.target );\r\n\t\t\t\t\t//var active = $( $.ui.safeActiveElement( this.document[ 0 ] ) );\r\n\t\t\t\t\tvar active = $(noder.active());\r\n\t\t\t\t\tif ( !this.mouseHandled && target.not( \".ui-state-disabled\" ).length ) {\r\n\t\t\t\t\t\tthis.select( event );\r\n\r\n\t\t\t\t\t\t// Only set the mouseHandled flag if the event will bubble, see #9469.\r\n\t\t\t\t\t\tif ( !event.isPropagationStopped() ) {\r\n\t\t\t\t\t\t\tthis.mouseHandled = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Open submenu on click\r\n\t\t\t\t\t\tif ( target.has( \".ui-menu\" ).length ) {\r\n\t\t\t\t\t\t\tthis.expand( event );\r\n\t\t\t\t\t\t} else if ( !this.element.is( \":focus\" ) &&\r\n\t\t\t\t\t\t\t\tactive.closest( \".ui-menu\" ).length ) {\r\n\r\n\t\t\t\t\t\t\t// Redirect focus to the menu\r\n\t\t\t\t\t\t\tthis.element.trigger( \"focus\", [ true ] );\r\n\r\n\t\t\t\t\t\t\t// If the active item is on the top level, let it stay active.\r\n\t\t\t\t\t\t\t// Otherwise, blur the active item since it is no longer visible.\r\n\t\t\t\t\t\t\tif ( this.active && this.active.parents( \".ui-menu\" ).length === 1 ) {\r\n\t\t\t\t\t\t\t\tclearTimeout( this.timer );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"mouseenter .ui-menu-item\": \"_activateItem\",\r\n\t\t\t\t\"mousemove .ui-menu-item\": \"_activateItem\",\r\n\t\t\t\t\"mouseleave\": \"collapseAll\",\r\n\t\t\t\t\"mouseleave .ui-menu\": \"collapseAll\",\r\n\t\t\t\t\"focus\": function( event, keepActiveItem ) {\r\n\r\n\t\t\t\t\t// If there's already an active item, keep it active\r\n\t\t\t\t\t// If not, activate the first item\r\n\t\t\t\t\tvar item = this.active || this._menuItems().first();\r\n\r\n\t\t\t\t\tif ( !keepActiveItem ) {\r\n\t\t\t\t\t\tthis.focus( event, item );\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"blur\": function( event ) {\r\n\t\t\t\t\tthis._delay( function() {\r\n\t\t\t\t\t\tvar notContained = !langx.includes(\r\n\t\t\t\t\t\t\tthis.element[ 0 ],\r\n\t\t\t\t\t\t\t//$.ui.safeActiveElement( this.document[ 0 ] )\r\n\t\t\t\t\t\t\tnoder.active()\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif ( notContained ) {\r\n\t\t\t\t\t\t\tthis.collapseAll( event );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t},\r\n\t\t\t\t\"keydown\": \"_keydown\"\r\n\t\t\t} );\r\n\r\n\t\t\t///this.refresh();\r\n\r\n\t\t\t// Clicks outside of a menu collapse any open menus\r\n\t\t\tthis.listenTo( $(document), {\r\n\t\t\t\tclick: function( event ) {\r\n\t\t\t\t\tif ( this._closeOnDocumentClick( event ) ) {\r\n\t\t\t\t\t\tthis.collapseAll( event, true );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Reset the mouseHandled flag\r\n\t\t\t\t\tthis.mouseHandled = false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\t_activateItem: function( event ) {\r\n\r\n\t\t\t// Ignore mouse events while typeahead is active, see #10458.\r\n\t\t\t// Prevents focusing the wrong item when typeahead causes a scroll while the mouse\r\n\t\t\t// is over an item in the menu\r\n\t\t\tif ( this.previousFilter ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// If the mouse didn't actually move, but the page was scrolled, ignore the event (#9356)\r\n\t\t\tif ( event.clientX === this.lastMousePosition.x &&\r\n\t\t\t\t\tevent.clientY === this.lastMousePosition.y ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastMousePosition = {\r\n\t\t\t\tx: event.clientX,\r\n\t\t\t\ty: event.clientY\r\n\t\t\t};\r\n\r\n\t\t\tvar actualTarget = $( event.target ).closest( \".ui-menu-item\" ),\r\n\t\t\t\ttarget = $( event.currentTarget );\r\n\r\n\t\t\t// Ignore bubbled events on parent items, see #11641\r\n\t\t\tif ( actualTarget[ 0 ] !== target[ 0 ] ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// If the item is already active, there's nothing to do\r\n\t\t\tif ( target.is(`.${this.options.item.classes.active}`) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Remove ui-state-active class from siblings of the newly focused menu item\r\n\t\t\t// to avoid a jump caused by adjacent elements both having a class with a border\r\n\t\t\t///this._removeClass( target.siblings().children( \".ui-state-active\" ),\r\n\t\t\t///\tnull, \"ui-state-active\" );\r\n\t\t\ttarget.siblings().children( `.${this.options.item.classes.active}` ).removeClass(this.options.item.classes.active);\r\n\t\t\tthis.focus( event, target );\r\n\t\t},\r\n\r\n\t\t_destroy: function() {\r\n\t\t\tvar items = this.element.find( \".ui-menu-item\" )\r\n\t\t\t\t\t.removeAttr( \"role aria-disabled\" ),\r\n\t\t\t\tsubmenus = items.children( \".ui-menu-item-wrapper\" )\r\n\t\t\t\t\t.removeUniqueId()\r\n\t\t\t\t\t.removeAttr( \"tabIndex role aria-haspopup\" );\r\n\r\n\t\t\t// Destroy (sub)menus\r\n\t\t\tthis.element\r\n\t\t\t\t.removeAttr( \"aria-activedescendant\" )\r\n\t\t\t\t.find( \".ui-menu\" ).addBack()\r\n\t\t\t\t\t.removeAttr( \"role aria-labelledby aria-expanded aria-hidden aria-disabled \" +\r\n\t\t\t\t\t\t\"tabIndex\" )\r\n\t\t\t\t\t.removeUniqueId()\r\n\t\t\t\t\t.show();\r\n\r\n\t\t\tsubmenus.children().each( function() {\r\n\t\t\t\tvar elem = $( this );\r\n\t\t\t\tif ( elem.data( \"ui-menu-submenu-caret\" ) ) {\r\n\t\t\t\t\telem.remove();\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\t_keydown: function( event ) {\r\n\t\t\tvar match, prev, character, skip,\r\n\t\t\t\tpreventDefault = true;\r\n\r\n\t\t\tswitch ( event.keyCode ) {\r\n\t\t\tcase keys.PAGE_UP:\r\n\t\t\t\tthis.previousPage( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.PAGE_DOWN:\r\n\t\t\t\tthis.nextPage( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.HOME:\r\n\t\t\t\tthis._move( \"first\", \"first\", event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.END:\r\n\t\t\t\tthis._move( \"last\", \"last\", event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.UP:\r\n\t\t\t\tthis.previous( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.DOWN:\r\n\t\t\t\tthis.next( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.LEFT:\r\n\t\t\t\tthis.collapse( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.RIGHT:\r\n\t\t\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\r\n\t\t\t\t\tthis.expand( event );\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.ENTER:\r\n\t\t\tcase keys.SPACE:\r\n\t\t\t\tthis._activate( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.ESC:\r\n\t\t\t\tthis.collapse( event );\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tpreventDefault = false;\r\n\t\t\t\tprev = this.previousFilter || \"\";\r\n\t\t\t\tskip = false;\r\n\r\n\t\t\t\t// Support number pad values\r\n\t\t\t\tcharacter = event.keyCode >= 96 && event.keyCode <= 105 ?\r\n\t\t\t\t\t( event.keyCode - 96 ).toString() : String.fromCharCode( event.keyCode );\r\n\r\n\t\t\t\tclearTimeout( this.filterTimer );\r\n\r\n\t\t\t\tif ( character === prev ) {\r\n\t\t\t\t\tskip = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcharacter = prev + character;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmatch = this._filterMenuItems( character );\r\n\t\t\t\tmatch = skip && match.index( this.active.next() ) !== -1 ?\r\n\t\t\t\t\tthis.active.nextAll( \".ui-menu-item\" ) :\r\n\t\t\t\t\tmatch;\r\n\r\n\t\t\t\t// If no matches on the current filter, reset to the last character pressed\r\n\t\t\t\t// to move down the menu to the first item that starts with that character\r\n\t\t\t\tif ( !match.length ) {\r\n\t\t\t\t\tcharacter = String.fromCharCode( event.keyCode );\r\n\t\t\t\t\tmatch = this._filterMenuItems( character );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( match.length ) {\r\n\t\t\t\t\tthis.focus( event, match );\r\n\t\t\t\t\tthis.previousFilter = character;\r\n\t\t\t\t\tthis.filterTimer = this._delay( function() {\r\n\t\t\t\t\t\tdelete this.previousFilter;\r\n\t\t\t\t\t}, 1000 );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete this.previousFilter;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( preventDefault ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_activate: function( event ) {\r\n\t\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\r\n\t\t\t\tif ( this.active.children( \"[aria-haspopup='true']\" ).length ) {\r\n\t\t\t\t\tthis.expand( event );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.select( event );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\trefresh: function() {\r\n\t\t\tvar menus, items, newSubmenus, newItems, newWrappers,\r\n\t\t\t\tthat = this,\r\n\t\t\t\ticon = this.options.icons.submenu,\r\n\t\t\t\t//submenus = this.element.find( this.options.menus );\r\n\t\t\t\tsubmenus = this.element.find( this.options.submenu.selectors.descendant );\r\n\r\n\t\t\t///this._toggleClass( \"ui-menu-icons\", null, !!this.element.find( \".ui-icon\" ).length );\r\n\t\t\tthis.element.toggleClass(\"ui-menu-icons\",!!this.element.find( \".ui-icon\" ).length);\r\n\r\n\r\n\t\t\t// Initialize nested menus\r\n\t\t\tnewSubmenus = submenus.filter( \":not(.ui-menu)\" )\r\n\t\t\t\t.hide()\r\n\t\t\t\t.attr( {\r\n\t\t\t\t\trole: this.options.role,\r\n\t\t\t\t\t\"aria-hidden\": \"true\",\r\n\t\t\t\t\t\"aria-expanded\": \"false\"\r\n\t\t\t\t} )\r\n\t\t\t\t.each( function() {\r\n\t\t\t\t\tvar menu = $( this ),\r\n\t\t\t\t\t\titem = menu.prev(),\r\n\t\t\t\t\t\tsubmenuCaret = $( \"<span>\" ).data( \"ui-menu-submenu-caret\", true );\r\n\r\n\t\t\t\t\t///that._addClass( submenuCaret, \"ui-menu-icon\", \"ui-icon \" + icon );\r\n\t\t\t\t\tsubmenuCaret.addClass([\"ui-menu-icon\", \"ui-icon \" + icon]);\r\n\t\t\t\t\titem\r\n\t\t\t\t\t\t.attr( \"aria-haspopup\", \"true\" )\r\n\t\t\t\t\t\t.prepend( submenuCaret );\r\n\t\t\t\t\tmenu.attr( \"aria-labelledby\", item.attr( \"id\" ) );\r\n\t\t\t\t} );\r\n\r\n\t\t\t//this._addClass( newSubmenus, \"ui-menu\", \"ui-widget ui-widget-content ui-front\" );\r\n\t\t\tnewSubmenus.addClass([ \"ui-menu\", \"ui-widget\", \"ui-widget-content\", \"ui-front\"]);\r\n\r\n\t\t\tmenus = submenus.add( this.element );\r\n\t\t\t///items = menus.find( this.options.items );\r\n\t\t\titems = menus.find(this.options.item.selector);\r\n\r\n\t\t\t// Initialize menu-items containing spaces and/or dashes only as dividers\r\n\t\t\titems.not( \".ui-menu-item\" ).each( function() {\r\n\t\t\t\tvar item = $( this );\r\n\t\t\t\tif ( that._isDivider( item ) ) {\r\n\t\t\t\t\t///that._addClass( item, \"ui-menu-divider\", \"ui-widget-content\" );\r\n\t\t\t\t\titem.addClass([\"ui-menu-divider\", \"ui-widget-content\"] )\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Don't refresh list items that are already adapted\r\n\t\t\tnewItems = items.not( \".ui-menu-item, .ui-menu-divider\" );\r\n\t\t\tnewWrappers = newItems.children()\r\n\t\t\t\t.not( \".ui-menu\" )\r\n\t\t\t\t\t.attr( {\r\n\t\t\t\t\t\ttabIndex: -1,\r\n\t\t\t\t\t\trole: this._itemRole()\r\n\t\t\t\t\t} );\r\n\t\t\tnewItems.addClass(\"ui-menu-item\");\r\n\t\t\tnewWrappers.addClass(\"ui-menu-item-wrapper\");\r\n\r\n\t\t\t// Add aria-disabled attribute to any disabled menu item\r\n\t\t\titems.filter( \".ui-state-disabled\" ).attr( \"aria-disabled\", \"true\" );\r\n\r\n\t\t\t// If the active item has been removed, blur the menu\r\n\t\t\tif ( this.active && !langx.includes( this.element[ 0 ], this.active[ 0 ] ) ) {\r\n\t\t\t\tthis.blur();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_itemRole: function() {\r\n\t\t\treturn {\r\n\t\t\t\tmenu: \"menuitem\",\r\n\t\t\t\tlistbox: \"option\"\r\n\t\t\t}[ this.options.role ];\r\n\t\t},\r\n\r\n\t\tfocus: function( event, item ) {\r\n\t\t\tvar nested, focused, activeParent;\r\n\t\t\tthis.blur( event, event && event.type === \"focus\" );\r\n\r\n\t\t\tthis._scrollIntoView( item );\r\n\r\n\t\t\tthis.active = item.first();\r\n\r\n\t\t\tfocused = this.active.children( \".ui-menu-item-wrapper\" );\r\n\t\t\t///this._addClass( focused, null, \"ui-state-active\" );\r\n\t\t\tfocused.addClass(this.options.item.classes.active);\r\n\r\n\t\t\t// Only update aria-activedescendant if there's a role\r\n\t\t\t// otherwise we assume focus is managed elsewhere\r\n\t\t\tif ( this.options.role ) {\r\n\t\t\t\tthis.element.attr( \"aria-activedescendant\", focused.attr( \"id\" ) );\r\n\t\t\t}\r\n\r\n\t\t\t// Highlight active parent menu item, if any\r\n\t\t\tactiveParent = this.active\r\n\t\t\t\t.parent()\r\n\t\t\t\t\t.closest( \".ui-menu-item\" )\r\n\t\t\t\t\t\t.children( \".ui-menu-item-wrapper\" );\r\n\t\t\t///this._addClass( activeParent, null, \"ui-state-active\" );\r\n\t\t\tactiveParent.addClass(this.options.item.classes.active );\r\n\r\n\t\t\tif ( event && event.type === \"keydown\" ) {\r\n\t\t\t\tthis._close();\r\n\t\t\t} else {\r\n\t\t\t\tthis.timer = this._delay( function() {\r\n\t\t\t\t\tthis._close();\r\n\t\t\t\t}, this.delay );\r\n\t\t\t}\r\n\r\n\t\t\tnested = item.children( \".ui-menu\" );\r\n\t\t\tif ( nested.length && event && ( /^mouse/.test( event.type ) ) ) {\r\n\t\t\t\tthis._startOpening( nested );\r\n\t\t\t}\r\n\t\t\tthis.activeMenu = item.parent();\r\n\r\n\t\t\t///this._trigger( \"focus\", event, { item: item } );\r\n\t\t\tthis.trigger(\"focus\",{item : item})\r\n\t\t},\r\n\r\n\t\t_scrollIntoView: function( item ) {\r\n\t\t\tvar borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\r\n\t\t\tif ( this._hasScroll() ) {\r\n\t\t\t\tborderTop = parseFloat( styler.css( this.activeMenu[ 0 ], \"borderTopWidth\" ) ) || 0;\r\n\t\t\t\tpaddingTop = parseFloat( styler.css( this.activeMenu[ 0 ], \"paddingTop\" ) ) || 0;\r\n\t\t\t\toffset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\r\n\t\t\t\tscroll = this.activeMenu.scrollTop();\r\n\t\t\t\telementHeight = this.activeMenu.height();\r\n\t\t\t\titemHeight = item.outerHeight();\r\n\r\n\t\t\t\tif ( offset < 0 ) {\r\n\t\t\t\t\tthis.activeMenu.scrollTop( scroll + offset );\r\n\t\t\t\t} else if ( offset + itemHeight > elementHeight ) {\r\n\t\t\t\t\tthis.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tblur: function( event, fromFocus ) {\r\n\t\t\tif ( !fromFocus ) {\r\n\t\t\t\tclearTimeout( this.timer );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !this.active ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t///this._removeClass( this.active.children( \".ui-menu-item-wrapper\" ),\r\n\t\t\t///\tnull, \"ui-state-active\" );\r\n\t\t\tthis.active.children( \".ui-menu-item-wrapper\" ).removeClass(this.options.item.classes.active);\r\n\r\n\t\t\t///this._trigger( \"blur\", event, { item: this.active } );\r\n\t\t\tthis.trigger( \"blur\", { item: this.active } );\r\n\t\t\tthis.active = null;\r\n\t\t},\r\n\r\n\t\t_startOpening: function( submenu ) {\r\n\t\t\tclearTimeout( this.timer );\r\n\r\n\t\t\t// Don't open if already open fixes a Firefox bug that caused a .5 pixel\r\n\t\t\t// shift in the submenu position when mousing over the caret icon\r\n\t\t\tif ( submenu.attr( \"aria-hidden\" ) !== \"true\" ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.timer = this._delay( function() {\r\n\t\t\t\tthis._close();\r\n\t\t\t\tthis._open( submenu );\r\n\t\t\t}, this.delay );\r\n\t\t},\r\n\r\n\t\t_open: function( submenu ) {\r\n\t\t\tvar position = langx.extend( {\r\n\t\t\t\tof: this.active\r\n\t\t\t}, this.options.position );\r\n\r\n\t\t\tclearTimeout( this.timer );\r\n\t\t\tthis.element.find( \".ui-menu\" ).not( submenu.parents( \".ui-menu\" ) )\r\n\t\t\t\t.hide()\r\n\t\t\t\t.attr( \"aria-hidden\", \"true\" );\r\n\r\n\t\t\tsubmenu\r\n\t\t\t\t.show()\r\n\t\t\t\t.removeAttr( \"aria-hidden\" )\r\n\t\t\t\t.attr( \"aria-expanded\", \"true\" )\r\n\t\t\t\t.position( position );\r\n\t\t},\r\n\r\n\t\tcollapseAll: function( event, all ) {\r\n\t\t\tclearTimeout( this.timer );\r\n\t\t\tthis.timer = this._delay( function() {\r\n\r\n\t\t\t\t// If we were passed an event, look for the submenu that contains the event\r\n\t\t\t\tvar currentMenu = all ? this.element :\r\n\t\t\t\t\t$( event && event.target ).closest( this.element.find( \".ui-menu\" ) );\r\n\r\n\t\t\t\t// If we found no valid submenu ancestor, use the main menu to close all\r\n\t\t\t\t// sub menus anyway\r\n\t\t\t\tif ( !currentMenu.length ) {\r\n\t\t\t\t\tcurrentMenu = this.element;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._close( currentMenu );\r\n\r\n\t\t\t\tthis.blur( event );\r\n\r\n\t\t\t\t// Work around active item staying active after menu is blurred\r\n\t\t\t\t///this._removeClass( currentMenu.find( \".ui-state-active\" ), null, \"ui-state-active\" );\r\n\t\t\t\tcurrentMenu.find( `.${this.options.item.classes.active}`).removeClass(this.options.item.classes.active );\r\n\r\n\t\t\t\tthis.activeMenu = currentMenu;\r\n\t\t\t}, all ? 0 : this.delay );\r\n\t\t},\r\n\r\n\t\t// With no arguments, closes the currently active menu - if nothing is active\r\n\t\t// it closes all menus.  If passed an argument, it will search for menus BELOW\r\n\t\t_close: function( startMenu ) {\r\n\t\t\tif ( !startMenu ) {\r\n\t\t\t\tstartMenu = this.active ? this.active.parent() : this.element;\r\n\t\t\t}\r\n\r\n\t\t\tstartMenu.find( \".ui-menu\" )\r\n\t\t\t\t.hide()\r\n\t\t\t\t.attr( \"aria-hidden\", \"true\" )\r\n\t\t\t\t.attr( \"aria-expanded\", \"false\" );\r\n\t\t},\r\n\r\n\t\t_closeOnDocumentClick: function( event ) {\r\n\t\t\treturn !$( event.target ).closest( \".ui-menu\" ).length;\r\n\t\t},\r\n\r\n\t\t_isDivider: function( item ) {\r\n\r\n\t\t\t// Match hyphen, em dash, en dash\r\n\t\t\treturn !/[^\\-\\u2014\\u2013\\s]/.test( item.text() );\r\n\t\t},\r\n\r\n\t\tcollapse: function( event ) {\r\n\t\t\tvar newItem = this.active &&\r\n\t\t\t\tthis.active.parent().closest( \".ui-menu-item\", this.element );\r\n\t\t\tif ( newItem && newItem.length ) {\r\n\t\t\t\tthis._close();\r\n\t\t\t\tthis.focus( event, newItem );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\texpand: function( event ) {\r\n\t\t\tvar newItem = this.active && this._menuItems( this.active.children( \".ui-menu\" ) ).first();\r\n\r\n\t\t\tif ( newItem && newItem.length ) {\r\n\t\t\t\tthis._open( newItem.parent() );\r\n\r\n\t\t\t\t// Delay so Firefox will not hide activedescendant change in expanding submenu from AT\r\n\t\t\t\tthis._delay( function() {\r\n\t\t\t\t\tthis.focus( event, newItem );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tnext: function( event ) {\r\n\t\t\tthis._move( \"next\", \"first\", event );\r\n\t\t},\r\n\r\n\t\tprevious: function( event ) {\r\n\t\t\tthis._move( \"prev\", \"last\", event );\r\n\t\t},\r\n\r\n\t\tisFirstItem: function() {\r\n\t\t\treturn this.active && !this.active.prevAll( \".ui-menu-item\" ).length;\r\n\t\t},\r\n\r\n\t\tisLastItem: function() {\r\n\t\t\treturn this.active && !this.active.nextAll( \".ui-menu-item\" ).length;\r\n\t\t},\r\n\r\n\t\t_menuItems: function( menu ) {\r\n\t\t\treturn ( menu || this.element )\r\n\t\t\t\t.find( this.options.items )\r\n\t\t\t\t.filter( \".ui-menu-item\" );\r\n\t\t},\r\n\r\n\t\t_move: function( direction, filter, event ) {\r\n\t\t\tvar next;\r\n\t\t\tif ( this.active ) {\r\n\t\t\t\tif ( direction === \"first\" || direction === \"last\" ) {\r\n\t\t\t\t\tnext = this.active\r\n\t\t\t\t\t\t[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( \".ui-menu-item\" )\r\n\t\t\t\t\t\t.last();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnext = this.active\r\n\t\t\t\t\t\t[ direction + \"All\" ]( \".ui-menu-item\" )\r\n\t\t\t\t\t\t.first();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( !next || !next.length || !this.active ) {\r\n\t\t\t\tnext = this._menuItems( this.activeMenu )[ filter ]();\r\n\t\t\t}\r\n\r\n\t\t\tthis.focus( event, next );\r\n\t\t},\r\n\r\n\t\tnextPage: function( event ) {\r\n\t\t\tvar item, base, height;\r\n\r\n\t\t\tif ( !this.active ) {\r\n\t\t\t\tthis.next( event );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this.isLastItem() ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this._hasScroll() ) {\r\n\t\t\t\tbase = this.active.offset().top;\r\n\t\t\t\theight = this.element.height();\r\n\t\t\t\tthis.active.nextAll( \".ui-menu-item\" ).each( function() {\r\n\t\t\t\t\titem = $( this );\r\n\t\t\t\t\treturn item.offset().top - base - height < 0;\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tthis.focus( event, item );\r\n\t\t\t} else {\r\n\t\t\t\tthis.focus( event, this._menuItems( this.activeMenu )\r\n\t\t\t\t\t[ !this.active ? \"first\" : \"last\" ]() );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpreviousPage: function( event ) {\r\n\t\t\tvar item, base, height;\r\n\t\t\tif ( !this.active ) {\r\n\t\t\t\tthis.next( event );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this.isFirstItem() ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this._hasScroll() ) {\r\n\t\t\t\tbase = this.active.offset().top;\r\n\t\t\t\theight = this.element.height();\r\n\t\t\t\tthis.active.prevAll( \".ui-menu-item\" ).each( function() {\r\n\t\t\t\t\titem = $( this );\r\n\t\t\t\t\treturn item.offset().top - base + height > 0;\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tthis.focus( event, item );\r\n\t\t\t} else {\r\n\t\t\t\tthis.focus( event, this._menuItems( this.activeMenu ).first() );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_hasScroll: function() {\r\n\t\t\treturn this.element.outerHeight() < this.element.prop( \"scrollHeight\" );\r\n\t\t},\r\n\r\n\t\tselect: function( event ) {\r\n\r\n\t\t\t// TODO: It should never be possible to not have an active item at this\r\n\t\t\t// point, but the tests don't trigger mouseenter before click.\r\n\t\t\tthis.active = this.active || $( event.target ).closest( \".ui-menu-item\" );\r\n\t\t\tvar ui = { item: this.active };\r\n\t\t\tif ( !this.active.has( \".ui-menu\" ).length ) {\r\n\t\t\t\tthis.collapseAll( event, true );\r\n\t\t\t}\r\n\t\t\t///this._trigger( \"select\", event, ui );\r\n\t\t\tthis.trigger( \"select\", ui );\r\n\t\t},\r\n\r\n\t\t_filterMenuItems: function( character ) {\r\n\t\t\tvar escapedCharacter = character.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" ),\r\n\t\t\t\tregex = new RegExp( \"^\" + escapedCharacter, \"i\" );\r\n\r\n\t\t\treturn this.activeMenu\r\n\t\t\t\t.find( this.options.items )\r\n\r\n\t\t\t\t\t// Only match on items, not dividers or other content (#10571)\r\n\t\t\t\t\t.filter( \".ui-menu-item\" )\r\n\t\t\t\t\t\t.filter( function() {\r\n\t\t\t\t\t\t\treturn regex.test(\r\n\t\t\t\t\t\t\t\tlangx.trim( $( this ).children( \".ui-menu-item-wrapper\" ).text() ) );\r\n\t\t\t\t\t\t} );\r\n\t\t}\r\n\t} );\r\n\r\n  plugins.register(PopupMenu);\r\n\r\n  return menus.PopupMenu = PopupMenu;\t\r\n\r\n});\r\n\ndefine('skylark-domx-plugins-menus/main',[\r\n    \"./menus\",\r\n    \"./accordion-menu\",\r\n    \"./cascade-menu\",\r\n    \"./nav-menu\",\r\n    \"./tree-menu\",\r\n    \"./popup-menu\"\r\n], function(menus) {\r\n    return menus;\r\n});\ndefine('skylark-domx-plugins-menus', ['skylark-domx-plugins-menus/main'], function (main) { return main; });\n\n"]}