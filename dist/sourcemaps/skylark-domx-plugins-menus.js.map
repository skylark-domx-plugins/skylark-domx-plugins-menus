{"version":3,"sources":["skylark-domx-plugins-menus.js"],"names":["define","skylark","attach","langx","$","lists","plugins","menus","Menu","Plugin","inherit","klassName","pluginName","options","template","classes","base","selectors","container","item","templates","general","separator","hasChildren","children","selector","data","onAction","_construct","elm","prototype","call","this","_$container","listenTo","e","itemData","currentTarget","renderMenuItemHtml","_renderItemHtml","itemTpl","isString","isFunction","renderGeneralMenuItem","_renderGeneralItemHtml","renderHasChildrenMenuItem","_renderHasChildrenItemHtml","register","AccordionMenu","multitier","mixin","togglable","CascadeMenu","NavMenu","items","resetItems","itemsData","self","$itemsContainer","forEach","renderItem","$container","$item","append","$childrenContainer","find","childItemData","TreeMenu","hide","$el","plugin","toggle","main"],"mappings":"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","file":"../skylark-domx-plugins-menus.js","sourcesContent":["define('skylark-domx-plugins-menus/menus',[\r\n\t\"skylark-langx/skylark\"\r\n],function(skylark){\r\n\treturn skylark.attach(\"domx.plugins.menus\");\r\n});\ndefine('skylark-domx-plugins-menus/menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\"\r\n],function(langx,$,lists,plugins,menus){\r\n  'use strict'\r\n\r\n\r\n  var Menu = plugins.Plugin.inherit({\r\n    klassName : \"Menu\",\r\n\r\n    pluginName : \"lark.menus.menu\",\r\n\r\n    options : {\r\n      template : \"\",\r\n\r\n      classes : {\r\n        base : \"lark-menu\"\r\n      },\r\n\r\n      selectors : {\r\n        container : null\r\n      },\r\n\r\n      item : {\r\n        templates : {\r\n          general : '<li class=\"menu-item\"><a href=\"#\" class=\"link\"><%= title %></a></li>',\r\n          separator : \"\",\r\n          hasChildren : '<li class=\"menu-item hasChildren\"><a href=\"#\" class=\"link\"><%= title %></a><ul class=\"submenu\"></ul>',\r\n        },\r\n\r\n        classes : {\r\n          base : \"menu-item\",\r\n          hasChildren : \"hasChildren\"\r\n        }\r\n      },\r\n\r\n      children : {\r\n        template : \"<ul></ul>\",\r\n        classes : {\r\n          base : \"submenu\"\r\n        },\r\n        selector : \"> .submenu\"\r\n      },\r\n\r\n      data : {\r\n        ///items : []\r\n      },\r\n\r\n      onAction : null\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        plugins.Plugin.prototype._construct.call(this,elm,options);\r\n\r\n        this._$container = this.$(this.options.selectors.container);\r\n\r\n        if (this.options.onAction) {\r\n          this.listenTo(this._$container,\"click\",`.${this.options.item.classes.base}`,(e)=>{\r\n              var itemData = $(e.currentTarget).data(\"item\");\r\n              this.options.onAction(itemData);\r\n\r\n          });\r\n        }\r\n\r\n    },\r\n\r\n    renderMenuItemHtml : function(itemData) {\r\n      if (!this._renderItemHtml) {\r\n        let itemTpl = this.options.item.template;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return this._renderItemHtml(itemData);\r\n    },\r\n\r\n    renderGeneralMenuItem : function(itemData) {\r\n      if (!this._renderGeneralItemHtml) {\r\n        let itemTpl = this.options.item.templates.general;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderGeneralItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderGeneralItemHtml = itemTpl;\r\n        }\r\n      }\r\n      return $(this._renderGeneralItemHtml(itemData));\r\n    },\r\n\r\n    renderHasChildrenMenuItem : function(itemData) {\r\n      if (!this._renderHasChildrenItemHtml) {\r\n        let itemTpl = this.options.item.templates.hasChildren;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return $(this._renderHasChildrenItemHtml(itemData));\r\n    }   \r\n\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Menu);\r\n\r\n  return menus.Menu = Menu; \r\n});\ndefine('skylark-domx-plugins-menus/accordion-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n  \r\n   var AccordionMenu = Menu.inherit({\r\n    klassName : \"AccordionMenu\",\r\n\r\n    pluginName : \"lark.menus.accordion\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          togglable : true\r\n        },this.options));\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(AccordionMenu);\r\n\r\n  return menus.AccordionMenu = AccordionMenu; \r\n});\ndefine('skylark-domx-plugins-menus/cascade-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var CascadeMenu = Menu.inherit({\r\n    klassName : \"CascadeMenu\",\r\n\r\n    pluginName : \"lark.menus.cascade\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          togglable : true\r\n        },this.options));\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(CascadeMenu);\r\n\r\n  return menus.CascadeMenu = CascadeMenu;\t\r\n});\ndefine('skylark-domx-plugins-menus/nav-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var NavMenu = Menu.inherit({\r\n    klassName : \"NavMenu\",\r\n\r\n    pluginName : \"lark.menus.nav\",\r\n\r\n    options : {\r\n      item : {\r\n        templates : {\r\n        } \r\n      }\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        if (this.options.data.items) {\r\n          this.resetItems(this.options.data.items);\r\n        }\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          /*\r\n          show : function($el) {\r\n            $el;\r\n          },\r\n\r\n          hide : function($el) {\r\n            $el;\r\n\r\n          },\r\n\r\n          toggle : function($el) {\r\n            $el;\r\n\r\n          }\r\n          */\r\n        },this.options));\r\n    },\r\n\r\n    resetItems : function(itemsData) {\r\n      let self = this;\r\n\r\n      function renderItem(itemData,$container) {\r\n        let $item;\r\n        if (itemData.children) {\r\n          $item = self.renderHasChildrenMenuItem(itemData);\r\n        } else {\r\n          $item = self.renderGeneralMenuItem(itemData);\r\n        }\r\n\r\n        $item.data(\"item\",itemData);\r\n        $container.append($item)\r\n\r\n        if (itemData.children) {\r\n          let $childrenContainer = $item.find(self.options.children.selector);\r\n          itemData.children.forEach((childItemData) => {\r\n            renderItem(childItemData,$childrenContainer);            \r\n          });\r\n        }\r\n      }\r\n        \r\n      let $itemsContainer = this.$(this.options.selectors.container)\r\n\r\n      itemsData.forEach((itemData)=>{\r\n        renderItem(itemData,$itemsContainer);\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(NavMenu);\r\n\r\n  return menus.NavMenu = NavMenu;\t\r\n});\n define('skylark-domx-plugins-menus/tree-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\",\r\n  \"skylark-domx-plugins-toggles\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var TreeMenu = Menu.inherit({\r\n    klassName : \"Tree\",\r\n\r\n    pluginName : \"lark.menus.tree\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          hide : function($el) {\r\n            $el.plugin(\"lark.toggles.collapse\").hide();\r\n          },\r\n          toggle : function($el) {\r\n            $el.plugin(\"lark.toggles.collapse\").toggle();\r\n          }\r\n        },this.options));\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(TreeMenu);\r\n\r\n  return menus.TreeMenu = TreeMenu;\t\r\n});\ndefine('skylark-domx-plugins-menus/main',[\r\n    \"./menus\",\r\n    \"./accordion-menu\",\r\n    \"./cascade-menu\",\r\n    \"./nav-menu\",\r\n    \"./tree-menu\"\r\n], function(menus) {\r\n    return menus;\r\n});\ndefine('skylark-domx-plugins-menus', ['skylark-domx-plugins-menus/main'], function (main) { return main; });\n\n"]}